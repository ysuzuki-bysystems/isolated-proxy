<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf8" />
    <title>æ¬¡ä¸–ä»£æ–°é«˜æ©Ÿèƒ½æ’ä»–é€šä¿¡å¯å¦åˆ¶å¾¡è£…ç½®è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ </title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 style=%22dominant-baseline:central;text-anchor:middle;font-size:90px;%22>ğŸ“º</text></svg>">
    <style>:root { font-size: calc(100vw/24); p { margin: 1rem; text-indent: 1em; } }</style>
  </head>
  <body>
    <p><output></output></p>
	  <script type="module">
async function process() {
  const res = await fetch("./api/who");
  if (!res.ok) {
    throw new Error(`${res.status}: ${res.statusText}`);
  }

  const { uses } = await res.json();

  if (typeof uses === "undefined") {
    return "ç©ºã„ã¦ã„ã¾ã™ã€‚";
  }

  return `${uses.name ?? "èª°ã‹"} ã•ã‚“ãŒ ${uses.computer ?? "ä½•ã‹"} ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ä¸­ã§ã™ã€‚(${new Intl.DateTimeFormat([], { dateStyle: "full", timeStyle: "full" }).format(new Date(uses.since ?? 0))} é ƒã‹ã‚‰)`;
}

const text = await process().catch(e => {
  console.error(e);
  return "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";
});
document.querySelector("output").textContent = text;
	  </script>
  </body>
</html>
